= Consumer Driven Contracts - a workshop
Oliver Nautsch <oliver.nautsch@nautsch.com>
2017
:author:
ifndef::imagesdir[:imagesdir: images]
ifndef::address-sourcedir[:address-sourcedir: ../../../../address-service]
ifndef::invoice-sourcedir[:invoice-sourcedir: ../../../../invoice-service]
:menu:
:goto:
:scale:
:help:
:toc:
:status:
:blank:
:figure-caption!:

== Introduction

Let's exercise, hack and talk about

*Consumer Driven* Contracts.

== Exercise-01 - Run the test

* checkout repo `git@github.com:ollin/cdc-workshop.git`
* cd into `cdc-workshop`
* run `./gradlew verify` (`./gradlew.bat` on windows) (not from IDE because of the env variable `pact.rootDir` defined in build.gradle, or you add this environment variable)

== Projects

=== Overview

image::service-overview.draw.io.png[projects - producer - consumer]

=== Directory Structure

----
✔ ~/dev/src/github.com/ollin/cdc-workshop [master|✚ 2]
15:59 $ tree -L 2
.
├── address-service     # <-- producer
│   ├── build
│   ├── build.gradle
│   ├── README.adoc
│   └── src
├── build.gradle        # <-- build file for both
├── gradle
│   └── wrapper
├── gradlew
├── gradlew.bat
├── invoice-service     # <-- consumer
│   ├── build
│   ├── build.gradle
│   ├── README.adoc
│   ├── src
│   └── target
├── out
│   └── production
├── presentation
│   ├── build
│   ├── build.gradle
│   └── src
├── README.adoc
└── settings.gradle
----

== Consumers test

[source,java]
.AddressServiceAdapterTest.java
----
...
include::{invoice-sourcedir}/src/test/java/net/nautsch/invoice/adapters/address/AddressServiceAdapterTest.java[tags=shouldDeliverAnAddress]
...
----

== Exercise-02 - Add street

The Consumer needs a street value

Add the field "street" as an expected result.

== The end

Thx!!!